<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">
    <title>ACES Star Formation Tour</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src='https://aladin.cds.unistra.fr/AladinLite/api/v3/latest/aladin.js' charset='utf-8'></script>
    <!-- Add draggable functionality -->
    <script type="text/javascript" src="draggable.js"></script>
    <script type="text/javascript" src="tour-common.js"></script>
    <link rel="stylesheet" href="default.css">
    <link rel="stylesheet" href="draggable.css">
    <link rel="stylesheet" href="tour-common.css">
</head>

<body>
    <div id="aladin-lite-div"></div>

    <div id="loading-div">Loading ACES Star Formation Tour... Please wait.</div>

    <div id="waypoint-info">
        <div id="waypoint-header">
            <button id="expand-btn" title="Expand/Collapse Info">â–¶</button>
            <h2 id="waypoint-title">Welcome to the ACES Central Molecular Zone Tour</h2>
        </div>
        <div id="waypoint-content">
            <p id="waypoint-description">
            This is a brief tour through the ACES view of the Central Molecular Zone.  Click "Start Tour" to begin.
            </p>
        </div>
    </div>

    <div id="progress-container">
        <div id="progress-bar">
            <div id="progress"></div>
        </div>
        <span id="current-waypoint">0</span>
    </div>

    <div id="tour-controls">
        <button id="prev-btn" title="Previous">â€¹</button>
        <button id="next-btn" title="Next">â€º</button>
        <button id="start-btn" title="Start/Play Tour">â–¶</button>
        <button id="reset-btn" title="Reset">âŸ²</button>
        <button id="share-btn" title="Copy shareable link to current waypoint">ðŸ”—</button>
        <select id="waypoint-dropdown" title="Jump to waypoint"
            style="background-color: #2962FF; color: white; border: none; padding: 12px 6px; border-radius: 8px; margin: 0 3px; cursor: pointer; font-size: 16px; position: relative; z-index: 120; width: 36px; text-align: center; -webkit-appearance: none; -moz-appearance: none; appearance: none;">
            <option value="">â‰«</option>
        </select>
        <select id="speed-dropdown" title="Tour speed: 1Ã— = normal, 2Ã— = double speed, 4Ã— = quadruple speed"
            style="background-color: #2962FF; color: white; border: none; padding: 12px 6px; border-radius: 8px; margin: 0 3px; cursor: pointer; font-size: 16px; position: relative; z-index: 120; width: 42px; text-align: center; -webkit-appearance: none; -moz-appearance: none; appearance: none;">
            <option value="1" selected>1Ã—</option>
            <option value="2">2Ã—</option>
            <option value="4">4Ã—</option>
        </select>
    </div>

    <div id="countdown-timer" style="display: none;">
        <span id="countdown-text">Next in: </span>
        <span id="countdown-value">5</span>
    </div>

    <script>
        // Define waypoints for the tour
        const waypoints = [
            {
                ra: 266.416667,
                dec: -29.008333,
                fov: 3.0,
                transition_fov: 3.0,
                transition_time: 2,
                zoom_out_time: 0,
                zoom_in_time: 2,
                title: "The CMZ",
                description: "The Central Molecular Zone seen with MEERKAT and Spitzer.  Color composite by Ashley Barnes.",
                url: getImageUrl("rgb_final_uncropped_hips"),
                pause_time: 5000  // Brief introduction
            },
            {
                ra: 266.416667,
                dec: -29.008333,
                fov: 0.8,
                transition_fov: 3.0,
                transition_time: 3,
                zoom_out_time: 2,
                zoom_in_time: 3,
                title: "ACES",
                description: "The ALMA Central Molecular Zone survey (ACES) combined with the Green Bank Telescope's MUSTANG survey in the Galactic Center.  This is the highest-resolution millimeter image produced of the Galactic Center.",
                url: getImageUrl("MUSTANG_12m_feather_noaxes_hips/"),
                is_sticky: true,
                //fade_enabled: true,
                fade_out_time: 1.5,
                fade_delay: 0.5,
                fade_in_time: 1.5,
                pause_time: 2000  // Short pause after fade
            },
            {
                ra: 266.835223,
                dec: -28.3958813,
                fov: 0.1,
                transition_fov: 0.8,
                transition_time: 3,
                zoom_out_time: 2,
                zoom_in_time: 3,
                title: "Sgr B2 with ALMA",
                description: "The Sgr B2 cloud is our Galaxy's most massive and active star-forming region.  It contains several high-mass protoclusters, Sgr B2 N and M, and a third that's a bit smaller, S. \n  This image shows the medium-resolution view of Sgr B2 with ALMA from Ginsburg+ 2018. ",
                url: getImageUrl("feathered_MGPS_ALMATCTE7m_hips/"),
                //fade_enabled: true,
                fade_out_time: 1.5,
                fade_delay: 0.5,
                fade_in_time: 1.5,
                pause_time: 3000  // Medium pause after fade
            },
            {
                ra: 266.83311023,
                dec: -28.37178279,
                fov: 0.006,
                transition_fov: 1,
                transition_time: 5,
                zoom_out_time: 3,
                zoom_in_time: 5,
                title: "Sgr B2N",
                description: "Sagittarius B2 North is the most massive site of ongoing star formation in the Milky Way.  Within a region less than a tenth of a parsec across, thousands of solar masses of gas are flowing into a central massive-star-forming protocluster birthing several proto-O-stars within only a few thousand astronomical units.  \n Data by Nazar Budaiev.",
                url: getImageUrl("GINSBURG_P_SgrB2N_RGB/"),
                fade_layer: getImageUrl("feathered_MGPS_ALMATCTE7m_hips/"),
                //fade_enabled: true,
                fade_out_time: 2,
                fade_delay: 0.5,
                fade_in_time: 2,
                pause_time: 4000  // Longer pause for detailed view
            },
            {
                ra: 266.833992,
                dec: -28.38459,
                fov: 0.006,
                transition_fov: 0.012,
                transition_time: 1,
                zoom_out_time: 3,
                zoom_in_time: 1,
                title: "Sgr B2M",
                description: "Sgr B2M is the most massive embedded star cluster in the Galactic Center.  The image shows several HII regions, sites where massive stars have ionized their surroundings, within a tiny volume.   \n Data by Nazar Budaiev.",
                url: getImageUrl("GINSBURG_P_SgrB2M_RGB/"),
                fade_layer: getImageUrl("feathered_MGPS_ALMATCTE7m_hips/"),
                //fade_enabled: true,
                fade_out_time: 2,
                fade_delay: 0.5,
                fade_in_time: 2,
                pause_time: 2000,
            },
            // {
            //     ra: 266.833992,
            //     dec: -28.38459,
            //     fov: 0.006,
            //     transition_fov: 0.012,
            //     transition_time: 5,
            //     zoom_out_time: 3,
            //     zoom_in_time: 5,
            //     url: getImageUrl("SgrB2_RGB_480-405-187_scaled_hips/"),
            //     fade_layer: getImageUrl("feathered_MGPS_ALMATCTE7m_hips/"),
            //     title: "Sgr B2M JWST",
            //     description: "The Sgr B2 cloud seen with JWST.  This is a composite of the 405, 356, and 200 micron bands.  \n Data by Nazar Budaiev & Adam Ginsburg.",
            //     pause_time: 1000
            // },
            {
                ra: 266.835223,
                dec: -28.3958813,
                fov: 0.1,
                transition_fov: 0.1,
                transition_time: 5,
                zoom_out_time: 3,
                zoom_in_time: 5,
                url: getImageUrl("jwst_cmz_hips/"),
                fade_layer: getImageUrl("feathered_MGPS_ALMATCTE7m_hips/"),
                title: "Sgr B2 JWST",
                description: "The Sgr B2 cloud seen with JWST.  This is a composite of the 4.80, 4.05, and 1.87 micron bands.  \n Data by Nazar Budaiev & Adam Ginsburg.",
                //fade_enabled: true,
                fade_out_time: 1,
                fade_delay: 0.5,
                fade_in_time: 1,
                // is_sticky: true,
            },
            {
                ra: 266.833327,
                dec: -28.3797941,
                fov: 0.05,
                transition_fov: 0.05,
                transition_time: 5,
                zoom_out_time: 1,
                zoom_in_time: 1,
                url: getImageUrl("SgrB2_2550_770_480_avm_hips"),
                fade_layer: getImageUrl("jwst_cmz_hips/"),
                title: "Sgr B2 - MIRI",
                description: "The Sgr B2 cloud seen with JWST MIRI.  This is a composite of the 25.5, 7.7, and NIRCam 4.8 micron bands.  \n Data by Nazar Budaiev & Adam Ginsburg.",
                //fade_enabled: true,
                fade_out_time: 1,
                fade_delay: 0.5,
                fade_in_time: 1,
                pause_time: 5000,
            },
            {
                ra: 266.541320,
                dec: -28.7088928,
                fov: 0.12,
                transition_fov: 0.5,
                transition_time: 5,
                zoom_out_time: 3,
                zoom_in_time: 5,
                url: getImageUrl("Brick_RGB_444-356-200_transparent_hips/"),
                fade_layer: getImageUrl("MUSTANG_12m_feather_noaxes_hips/"),
                title: "Brick JWST - 200 356 405",
                description: "The Brick JWST image of the Galactic Center.  This is a composite of the 4.05, 3.56, and 2.00 micron bands.  \n Ginsburg et al 2023 & project 1182.",
                //fade_enabled: true,
                fade_out_time: 1,
                fade_delay: 0.5,
                fade_in_time: 1,
                pause_time: 5000
            },
            {
                ra: 266.541320,
                dec: -28.7088928,
                fov: 0.12,
                transition_fov: 0.5,
                transition_time: 5,
                zoom_out_time: 3,
                zoom_in_time: 5,
                url: getImageUrl("BrickJWST_1182p2221_405_356_200_hips/"),
                fade_layer: getImageUrl("Brick_RGB_444-356-200_transparent_hips/"),
                title: "Brick JWST - 200 356 405",
                description: "The Brick JWST image of the Galactic Center.  This is a composite of the 4.05, 3.56, and 2.00 micron bands.  \n Ginsburg et al 2023 & project 1182.",
                //fade_enabled: true,
                fade_out_time: 1,
                fade_delay: 0.5,
                fade_in_time: 1,
                pause_time: 5000
            },
            {
                ra: 266.541320,
                dec: -28.7088928,
                fov: 0.12,
                transition_fov: 0.12,
                transition_time: 1,
                zoom_out_time: 1,
                zoom_in_time: 1,
                url: getImageUrl("BrickJWST_merged_longwave_narrowband_withstars_hips/"),
                fade_layer: getImageUrl("BrickJWST_1182p2221_405_356_200_hips/"),
                title: "Brick JWST - 410 466",
                description: "The Brick JWST image of the Galactic Center.  This is a composite of the 4.10 and 4.66 micron bands including stars.  \n Ginsburg et al 2023.",
                //fade_enabled: true,
                fade_out_time: 1,
                fade_delay: 0.5,
                fade_in_time: 1,
                pause_time: 5000
            },
            {
                ra: 266.541320,
                dec: -28.7088928,
                fov: 0.12,
                transition_fov: 0.12,
                transition_time: 1,
                zoom_out_time: 1,
                zoom_in_time: 1,
                url: getImageUrl("BrickJWST_merged_longwave_narrowband_hips/"),
                fade_layer: getImageUrl("BrickJWST_merged_longwave_narrowband_withstars_hips/"),
                title: "Brick JWST - 410 466 starless",
                description: "The Brick JWST image of the Galactic Center.  This is a composite of the 4.10 and 4.66 micron bands with stars removed.  \n Ginsburg et al 2023.",
                //fade_enabled: true,
                fade_out_time: 1,
                fade_delay: 0.5,
                fade_in_time: 1,
                pause_time: 5000
            },
        ];

        // Initialize the tour when the page is loaded
        document.addEventListener('DOMContentLoaded', function () {
            initializeTour(waypoints, {
                initialSurvey: 'rgb_final_uncropped_hips/'
            });
        });
    </script>
</body>

</html>